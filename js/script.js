'use strict';

const unreadIndirectMessagesIcon = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACQUlEQVRYR81XsW7TUBQ9x00Q2APpxkZcPoBIxHOTD0AKPwDdGDpQMSPFHdjLwN58AUV8QNI5DMkHNPbIgEQQskGy64ueTVKnSZo4dWO8+t17zj333vfuJdb8nBoqKOn7EdGisApKFWA1MRcXQlcoriY4Q+ifmwOM13HNVYec2v1qVNbaBA9WnU3/F8ipFkTH5uCPe5PdUgIq4qhktEkcZQG+fpYiNkL/wzJFFhJQ4FLWuwBrtwG/spUBA7+5iMQcAccyaiLogqjkA/7Pi2BMomn2vUHa7wyBOPKS4eQOPkFUJELPTCsxJZC/7Mv0m03HlMCFZZwQeJOr7Eucicjxk6++rX7HBFSrSXnH2Qb4BIPBpalaNCYwsvRTgK+2SQCQzl7fP2CSe+PHdsETNAbeLp1neks0fiqEQCQvWIz8077scFQ3eiD2syrw6OMXPLCasdnvfhffDp9ndQEIzjmq6y7Ix1msd1+/Q+XlW6B8b2r263MH398fZnGjXtEBR5YhGa2Qjn5iu6kKGxHITwFgoxSoqHOpAchw4yLMmraF5+MiLOQWTLVh4RdRkVfxXt9j8Y/Rf/EcKxIXdd0m2c6lulc4mRtIEhXiSbgH8OndkpAhA78xmQvnhtKoZLgkHt4FCRH81EKvunAonQCqsTwS9PImEYMTjRvH8imJ3NMxK3ta3RWrmX5028JUBaeF/kmm1SzNMJmYNTv70CodBpG98XJ6vQjj9XxHb4iGFpL1vHLVMTKEcAyKywhnuPR7667nfwF1uxFuTqg/rgAAAABJRU5ErkJggg==`;

const defaultIcon = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEDElEQVRYR+2WXWgcVRTH/2fMx+5mN0kLAdNuk02yX2n8oNFnfRB886XBvhW0hUYsBhrR1mStqyY0IopaEZXqk4IF3xVEEB/0JRETWM0usVBLsdRoUqM2ydxzj9zZj8wmMXeiD0VwYJkd5j//87v/c2bvEm7xQbe4Pv4bAPHTv602h8ONtrQcx1lsijr9hVH61aat3g+UQMsjJdmfTAXyJGCimKNnA4mBgC04PC1dmQxCLVG7L+FGJILEt6do2S7eBUAkFkM8lQ7iCYfw/Pw45YOIA7UAh6fFmB1IpRGOxYL4LscakJg5QzdsYjvAielGLGLdGEWiUcTTGZund58IZ4vj9KJNbAd4+JsOsL5eNYonU4i0ttp8DcASGtBdPE0rO4kDAMxmwO581SQcbcGBdNYKUEkhVxynyX8HMDRzBCIX/SbxZBKR1jYrBBF+aWhHonCSfv87sT2BoenXIRjxG4QiEXRl+60AnsDBM6UxmvpHAAP5QtN8QV1mdm/fbLC/rw8tbe1WCAIWm5uRmHuK/thOvGMCoaPfHWdXXVBKQbSuez4UDqOr36RgD5EITxfH6eVdAbQfv9S9rtxZ5bptzAzNvAViX28vou17rCkAuB7rQM/MMP25WbwtfsfwldQaq0+VcntNYfNhpbyP/2gOhdDdf9B76a2HgydLY/TqjgCJ/FL7zaW1x5XLZ1ipGLMpyjDnKoQ5+4/Onh7E9uy11ifg2t4Ier8epZt+MaXy7n3rrvuQVu7dzHw/K25i5cLEblZcTUC5FQiun4emUAiJgQGG4DYbBQGnijl6rQ4gmVcrit0omwLaFDWRl1dei9679sGYVoi3PZghnM0MDs4JcNQKQPipcx96v3iUVqtaSr3A4g2Z6XGl32bqq9f+wt4c+NoBAsNxHjg4eOgqM74XoMEG4RBG5sfpfA0gPSGita4NmVm95vK1l0B19d4sVNriJaWghc/i43u9DSczKe+J4JgNAISrfTH0fTJCa15+BsB82Yi7Yl5JxCtUKViDMu3R/Hkue+eD+Tx5PxDZc5IQjZIIrH/dAJws5eitOgARqev5xqtXnoXyXJTbxEp9Fm2kocX3s3U7XWZS3hbBsDUF4EpjGsnCEVqvJWAeMr92/unfWHG592YwRfMHKafn2My75G4udNdLEl9VWICg2QbhOHhsfozeqQOotcI3lDUIzcvC7nOLb8bPE1H1FdhSJz0pb0DwhA2AgMvRDqS2AFQhlHKhzeBp1lrxBWlqzF07F/vZZtw/KZ0M/ABB2KZ1HJzYFsC0Qmue0ywX2ZWPfpwKXbKZ+e9nJ+QVDYwGeKZAldfnEAELQlionL8qjVHtX1AAozrJPVPStsL4kAR3gHbcLr8MsIvstvzu9P8D/AUM0XHsUFysNwAAAABJRU5ErkJggg==`;

const icon = document.querySelector('link[rel="icon"]');

// Create an observer instance linked to the callback function
new MutationObserver((mutationsList, observer) => {
    if (icon.href === unreadIndirectMessagesIcon) {
      console.log('[Stride favicon extension]:', mutationsList, 'replace unread indirect messages icon with default icon');
      icon.href = defaultIcon;
    }
})
.observe(icon, {attributes: true, childList: false, subtree: false});
//observer.disconnect();